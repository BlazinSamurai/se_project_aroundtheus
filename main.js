!function(){"use strict";class e{constructor(e,t,s,r,n){let{name:i,altName:o,link:a,_id:l}=e;this.name=i,this.altName=o,this.link=a,this._id=l,this._cardSelector=t,this._handleImageClick=s,this._handleConfirmModal=r,this._handleLikeIconClick=n}_setCardData(){return this._cardImage.src=this.link,this._cardImage.alt=this.altName,this._cardTitle.textContent=this.name,this.cardElement}_setEventListener(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIconClick(this)})),this._trashButton.addEventListener("click",(()=>{this._handleConfirmModal(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this)}))}changeHeartIcon(e){e.apiData.isLiked?(this._likeButton.classList.remove("card__button-like_active"),e.apiData.isLiked=!1):(this._likeButton.classList.add("card__button-like_active"),e.apiData.isLiked=!0)}setHeartIcon(e){this.apiData=e,e.isLiked&&this._likeButton.classList.add("card__button-like_active")}removeCard(e){e.remove(),e=null}getView(){return this.cardElement=document.querySelector(this._cardSelector).content.querySelector(".card__section").cloneNode(!0),this._likeButton=this.cardElement.querySelector(".card__button-like"),this._trashButton=this.cardElement.querySelector(".card__button-trash"),this._cardImage=this.cardElement.querySelector(".card__image"),this._cardTitle=this.cardElement.querySelector(".card__title"),this._setCardData(),this._setEventListener(),this.cardElement}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inputErrorClass=e.errorClass,this._validatedForm=t}_enableButton(){this._button.classList.remove(`${this._submitButtonSelector}_disabled`),this._button.disabled=!1}_showInputError(e){this._errorClassEl=document.querySelector(`#${e.id}-error`),e.classList.add(this._errorClassEl.id),this._errorClassEl.textContent=e.validationMessage,this._errorClassEl.classList.add(`#${e.id}-error`)}_hideInputError(e){this._errorClassEl=document.querySelector(`#${e.id}-error`),e.classList.remove(this._errorClassEl.id),this._errorClassEl.textContent="",this._errorClassEl.classList.remove(`#${e.id}-error`)}_returnsValidity(){return this._inputs.every((e=>e.validity.valid))}_toggleButtonState(){this._returnsValidity()?this._enableButton():this.disableButton()}_checkInputValidity(e){this._returnsValidity()?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._inputs=[...this._validatedForm.querySelectorAll(`.${this._inputSelector}`)],this._button=this._validatedForm.querySelector(`.${this._submitButtonSelector}`),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}disableButton(){this._button.classList.add(`${this._submitButtonSelector}_disabled`),this._button.disabled=!0}enableValidation(){this._validatedForm.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupSelector=t,this._popupElement=document.querySelector(t),this._closePopupButton=this._popupElement.querySelector(".modal__close"),this._handleOverlayClick=e=>this._handleOverlay(e),this._handleDocumentKeydown=e=>this._handleEscClose(e)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlay(e){e.target.id===this._popupElement.id&&this.close()}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("click",this._handleOverlayClick,!0),document.addEventListener("keydown",this._handleDocumentKeydown,!1)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("click",this._handleOverlayClick,!0),document.removeEventListener("keydown",this._handleDocumentKeydown,!1)}setEventListeners(){this._closePopupButton.addEventListener("click",(()=>{this.close()}))}}class r extends s{constructor(e,t){super({popupSelector:e}),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setButtonText(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving . . .";if(e)return t.textContent=s,!0;t.textContent=s}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(()=>{const e=this._getInputValues();this._handleFormSubmit(e)}))}}const n={formSelector:"modal__form",inputSelector:"modal__input",submitButtonSelector:"modal__button",errorClass:"modal__input-error"},i=document.querySelector("#add-modal-form"),o=i.querySelector(".modal__button"),a=document.querySelector("#edit-modal").querySelector("#edit-modal-form"),l=a.querySelector(".modal__button"),c=document.querySelector("#profile-modal-form"),h=document.querySelector("#profile__avatar-pen-icon"),d=document.querySelector(".profile__button-edit"),u=document.querySelector(".profile__button-add"),_=c.querySelector(".modal__button"),m=(document.querySelector("#profile__avatar-pic"),document.querySelector("#trash-modal").querySelector(".modal__button"));function p(e){q.open(e)}function v(e){B.open(),B.setSubmitFunction((()=>{g.setButtonText(!0,m),I.deleteCard(e.apiData._id).then((()=>{B.close(),e.removeCard(e.cardElement)})).catch((e=>{console.error(e)})).finally((()=>{g.setButtonText(!1,m,"Yes")}))}))}function E(e){e.apiData.isLiked?I.deleteCardLike(e.apiData._id).then((()=>{e.changeHeartIcon(e)})).catch((e=>{console.error(e)})):I.putCardLike(e.apiData._id).then((()=>{e.changeHeartIcon(e)})).catch((e=>{console.error(e)}))}function S(t){const s=new e({name:t.name,altName:t.name,link:t.link,_id:t._id},"#card-template",p,v,E),r=s.getView();return s.setHeartIcon(t),r}h.addEventListener("click",(()=>{L.open(),f.disableButton()})),d.addEventListener("click",(()=>{const e=b.getUserInfo();C.setInputValues(e),C.open(),y.disableButton()})),u.addEventListener("click",(()=>{g.open(),k.disableButton()}));const b=new class{constructor(e,t,s){this._nameSelector=e,this._bioSelector=t,this._avatarSelector=s,this._nameElement=document.querySelector(this._nameSelector),this._bioElement=document.querySelector(this._bioSelector),this._avatarElement=document.querySelector(this._avatarSelector)}setAvatarPic(e){this._avatarElement.src=e}getUserInfo(){return{name:this._nameElement.textContent,bio:this._bioElement.textContent,avatar:this._avatarElement.src}}setUserInfo(e,t,s){this._nameElement.textContent=e,this._bioElement.textContent=t,this._avatarElement.src=s}}(".profile__name",".profile__bio","#profile__avatar-pic"),f=new t(n,c);f.enableValidation();const y=new t(n,a);y.enableValidation();const k=new t(n,i);k.enableValidation();const L=new r("#profile-modal",(function(e){L.setButtonText(!0,_),I.patchProfileAvatar(e.url).then((e=>{f.disableButton(),b.setAvatarPic(e.avatar),L.close(),c.reset()})).catch((e=>{console.error(e)})).finally((()=>{L.setButtonText(!1,_,"Save")}))}));L.setEventListeners();const C=new r("#edit-modal",(function(e){const t=b.getUserInfo();C.setButtonText(!0,l),I.patchProfile(e.name,e.bio).then((()=>{y.disableButton(),b.setUserInfo(e.name,e.bio,t.avatar),C.close()})).catch((e=>{console.error(e)})).finally((()=>{C.setButtonText(!1,l,"Save")}))}));C.setEventListeners();const g=new r("#add-modal",(function(e){const t=e.title,s=e.url;g.setButtonText(!0,o),I.postCards({name:t,link:s}).then((e=>{k.disableButton();const t=S(e);w.addItem(t),g.close(),i.reset()})).catch((e=>{console.error(e)})).finally((()=>{g.setButtonText(!1,o,"Create")}))}));g.setEventListeners();const q=new class extends s{constructor(e){super({popupSelector:e}),this._popupPreviewImage=document.querySelector(`${e}-image`),this._popupPreviewCaption=document.querySelector(`${e}-title`)}open(e){this._popupPreviewImage.src=e.link,this._popupPreviewImage.alt=e.altName,this._popupPreviewCaption.textContent=e.name,super.open()}}("#preview-modal");q.setEventListeners();const B=new class extends s{constructor(e,t){super({popupSelector:e}),this._popupSelector=e,this._handleDelete=t}setSubmitFunction(e){this._handleDelete=e}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleDelete()}))}}("#trash-modal",v);B.setEventListeners();const I=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status} + ${e.message}`)}_request(e,t){return fetch(e,t).then(this._checkResponse)}patchProfileAvatar(e){return this._request(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}getProfile(){return this._request(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers})}patchProfile(e,t){return this._request(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})})}getCards(){return fetch(this._baseUrl+"/cards",{method:"GET",headers:this._headers}).then(this._checkResponse).then((e=>e))}postCards(e){return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse).then((e=>e))}putCardLike(e){return fetch(this._baseUrl+`/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteCardLike(e){return fetch(this._baseUrl+`/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}deleteCard(e){return fetch(this._baseUrl+`/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse).then((e=>{console.log(e)}))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c430f938-707d-41ce-9931-5e6195b9093a","Content-Type":"application/json"}});I.getProfile().then((e=>{b.setUserInfo(e.name,e.about,e.avatar)})).catch((e=>{console.error(e)}));const w=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._classSelector=t,this.container=document.querySelector(this._classSelector)}renderItems(e){e.forEach((e=>{const t=this._renderer(e);this.container.append(t)}))}addItem(e){this.container.prepend(e)}}({items:null,renderer:S},".card__list");I.getCards().then((e=>{w.renderItems(e)})).catch((e=>{console.error(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1QsT0FBT1osTUFBTXRMLEtBQUswSyxTQUFXLFVBQVV3QixJQUFVLENBQy9DWCxPQUFRLFNBQ1JkLFFBQVN6SyxLQUFLMkssV0FFYnJELEtBQUt0SCxLQUFLNEssZ0JBQ1Z0RCxNQUFNMEUsSUFDTHZFLFFBQVEwRSxJQUFJSCxFQUFPLEdBRXpCLEdKbUprQixDQUNsQnhCLFFBQVMsa0RBQ1RDLFFBQVMsQ0FDUDJCLGNEOU42Qix1Q0MrTjdCLGVBQWdCLHNCQUlwQmhGLEVBQ0d1RSxhQUNBckUsTUFBTXJHLElBQ0xtSCxFQUFTaUIsWUFBWXBJLEVBQUtyQixLQUFNcUIsRUFBSzZLLE1BQU83SyxFQUFLbUksT0FBTyxJQUV6RDdCLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksSUFPdEIsTUFBTXlDLEVBQVUsSUtoU0QsTUFRYjNLLFdBQUFBLENBQVdDLEVBQXNCOE0sR0FBZSxJQUFwQyxNQUFFQyxFQUFLLFNBQUVDLEdBQVVoTixFQUM3QlMsS0FBS3dNLE9BQVNGLEVBQ2R0TSxLQUFLeU0sVUFBWUYsRUFDakJ2TSxLQUFLME0sZUFBaUJMLEVBRXRCck0sS0FBSzJNLFVBQVloTCxTQUFTQyxjQUFjNUIsS0FBSzBNLGVBQy9DLENBR0FFLFdBQUFBLENBQVlDLEdBQ1ZBLEVBQU05SSxTQUFTdEMsSUFDYixNQUFNcUwsRUFBVTlNLEtBQUt5TSxVQUFVaEwsR0FDL0J6QixLQUFLMk0sVUFBVUksT0FBT0QsRUFBUSxHQUVsQyxDQUlBNUMsT0FBQUEsQ0FBUUYsR0FDTmhLLEtBQUsyTSxVQUFVSyxRQUFRaEQsRUFDekIsR0xxUUEsQ0FBRXNDLE1BQU8sS0FBTUMsU0FBVXpFLEdBQ3pCLGVBR0ZWLEVBQ0cyRSxXQUNBekUsTUFBTXVGLElBQ0w1QyxFQUFRMkMsWUFBWUMsRUFBTSxJQUUzQnRGLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBhbHROYW1lLCBsaW5rLCBfaWQgfSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVDb25maXJtTW9kYWwsXHJcbiAgICBoYW5kbGVMaWtlSWNvbkNsaWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5hbHROYW1lID0gYWx0TmFtZTtcclxuICAgIHRoaXMubGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9pZCA9IF9pZDtcclxuXHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1Nb2RhbCA9IGhhbmRsZUNvbmZpcm1Nb2RhbDtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uQ2xpY2sgPSBoYW5kbGVMaWtlSWNvbkNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldENhcmREYXRhKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMubGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLmFsdE5hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb25DbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1Nb2RhbCh0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VIZWFydEljb24oZGF0YSkge1xyXG4gICAgaWYgKGRhdGEuYXBpRGF0YS5pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICAgICAgZGF0YS5hcGlEYXRhLmlzTGlrZWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICAgICAgZGF0YS5hcGlEYXRhLmlzTGlrZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0SGVhcnRJY29uKGFwaURhdGEpIHtcclxuICAgIHRoaXMuYXBpRGF0YSA9IGFwaURhdGE7XHJcbiAgICBpZiAoYXBpRGF0YS5pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoY2FyZCkge1xyXG4gICAgY2FyZC5yZW1vdmUoKTtcclxuICAgIGNhcmQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fc2VjdGlvblwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIik7XHJcbiAgICB0aGlzLl90cmFzaEJ1dHRvbiA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tdHJhc2hcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcblxyXG4gICAgdGhpcy5fc2V0Q2FyZERhdGEoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtVG9WYWxpZGF0ZSkge1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl92YWxpZGF0ZWRGb3JtID0gZm9ybVRvVmFsaWRhdGU7XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKGAke3RoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yfV9kaXNhYmxlZGApO1xuICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICB0aGlzLl9lcnJvckNsYXNzRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzRWwuaWQpO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3NFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JDbGFzc0VsLmNsYXNzTGlzdC5hZGQoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIHRoaXMuX2Vycm9yQ2xhc3NFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3NFbC5pZCk7XG4gICAgdGhpcy5fZXJyb3JDbGFzc0VsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB0aGlzLl9lcnJvckNsYXNzRWwuY2xhc3NMaXN0LnJlbW92ZShgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgfVxuXG4gIF9yZXR1cm5zVmFsaWRpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0cy5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5fcmV0dXJuc1ZhbGlkaXR5KCkpIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAodGhpcy5fcmV0dXJuc1ZhbGlkaXR5KCkpIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRzID0gW1xuICAgICAgLi4udGhpcy5fdmFsaWRhdGVkRm9ybS5xdWVyeVNlbGVjdG9yQWxsKGAuJHt0aGlzLl9pbnB1dFNlbGVjdG9yfWApLFxuICAgIF07XG5cbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl92YWxpZGF0ZWRGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7dGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3J9YFxuICAgICk7XG5cbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3J9X2Rpc2FibGVkYCk7XG4gICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdmFsaWRhdGVkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XG5cbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlUG9wdXBCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGV2ZW50IGhhbmRsZXJzIHNlcGFyYXRlbHlcbiAgICB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2sgPSAoZSkgPT4gdGhpcy5faGFuZGxlT3ZlcmxheShlKTtcbiAgICB0aGlzLl9oYW5kbGVEb2N1bWVudEtleWRvd24gPSAoZSkgPT4gdGhpcy5faGFuZGxlRXNjQ2xvc2UoZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVPdmVybGF5KGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0LmlkID09PSB0aGlzLl9wb3B1cEVsZW1lbnQuaWQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2ssIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZURvY3VtZW50S2V5ZG93biwgZmFsc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbGljaywgdHJ1ZSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRG9jdW1lbnRLZXlkb3duLCBmYWxzZSk7XG4gIH1cblxuICAvLyBjbGljayBldmVudCBsaXN0ZW5lciB0byB0aGUgY2xvc2UgaWNvbiBvZiB0aGUgcG9wdXAuXG4gIC8vIFRoZSBtb2RhbCB3aW5kb3cgc2hvdWxkIGFsc28gY2xvc2Ugd2hlbiB1c2VycyBjbGlja1xuICAvLyBvbiB0aGUgc2hhZGVkIGFyZWEgYXJvdW5kIHRoZSBmb3JtXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlUG9wdXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICAvLyBjb2xsZWN0cyBkYXRhIGZyb20gYWxsIHRoZSBpbnB1dCBmaWVsZHMgYW5kIHJldHVybnMgaXQgYXMgYW4gb2JqZWN0LlxyXG4gIC8vIFRoaXMgZGF0YSBzaG91bGQgdGhlbiBiZSBwYXNzZWQgdG8gdGhlIHN1Ym1pc3Npb24gaGFuZGxlciBhcyBhbiBhcmd1bWVudFxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEJ1dHRvblRleHQoaXNMb2FkaW5nLCBidXR0b24sIGJ0blRleHQgPSBcIlNhdmluZyAuIC4gLlwiKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGJ0blRleHQ7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gYnRuVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIHdoaWNoIGNhbiBpbnNlcnQgZGF0YSBpbnRvIGlucHV0c1xyXG4gIC8vIFNvLCB0aGlzIHdheSB5b3XigJlsbCBub3QgaGF2ZSB0byBzZWFyY2ggdGhlIGlucHV0cyBvZiB0aGUgcHJvZmlsZSBpbiBpbmRleC5qc1xyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAvLyBIZXJlIHlvdSBpbnNlcnQgdGhlIGB2YWx1ZWAgYnkgdGhlIGBuYW1lYCBvZiB0aGUgaW5wdXRcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBzZXRFdmVudExpc3RlbmVycygpIG1ldGhvZCBvZiB0aGUgUG9wdXBXaXRoRm9ybSBjbGFzcyBzaG91bGQgYWRkIGEgc3VibWl0XHJcbiAgLy8gZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGZvcm0gYW5kIGNhbGwgdGhlIHNldEV2ZW50TGlzdGVuZXJzKCkgbWV0aG9kIG9mIHRoZVxyXG4gIC8vIHBhcmVudCBjbGFzcy5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGZvcm1WYWx1ZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBjYXJkc0RhdGEgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgYWx0TmFtZTogXCJMYWdvIGRpIEJyYWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgYWx0TmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBhbHROYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgYWx0TmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgYWx0TmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGFsdE5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCJtb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwibW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwibW9kYWxfX2J1dHRvblwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYWRkTW9kYWxDbGFzc1N0ZyA9IFwiI2FkZC1tb2RhbFwiO1xyXG5leHBvcnQgY29uc3QgZWRpdE1vZGFsQ2xhc3NTdGcgPSBcIiNlZGl0LW1vZGFsXCI7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJNb2RhbENsYXNzU3RnID0gXCIjcHJvZmlsZS1tb2RhbFwiO1xyXG5leHBvcnQgY29uc3QgcHJldmlld01vZGFsQ2xhc3NTdGcgPSBcIiNwcmV2aWV3LW1vZGFsXCI7XHJcbmV4cG9ydCBjb25zdCB0cmFzaE1vZGFsQ2xhc3NTdGcgPSBcIiN0cmFzaC1tb2RhbFwiO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVTdGcgPSBcIi5wcm9maWxlX19uYW1lXCI7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQmlvU3RnID0gXCIucHJvZmlsZV9fYmlvXCI7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJQaWNTdGcgPSBcIiNwcm9maWxlX19hdmF0YXItcGljXCI7XHJcblxyXG5leHBvcnQgY29uc3QgYXV0aG9yaXphdGlvbkNvZGUgPSBcImM0MzBmOTM4LTcwN2QtNDFjZS05OTMxLTVlNjE5NWI5MDkzYVwiO1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHtcclxuICBhdXRob3JpemF0aW9uQ29kZSxcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIGFkZE1vZGFsQ2xhc3NTdGcsXHJcbiAgZWRpdE1vZGFsQ2xhc3NTdGcsXHJcbiAgYXZhdGFyTW9kYWxDbGFzc1N0ZyxcclxuICBwcmV2aWV3TW9kYWxDbGFzc1N0ZyxcclxuICB0cmFzaE1vZGFsQ2xhc3NTdGcsXHJcbiAgcHJvZmlsZU5hbWVTdGcsXHJcbiAgcHJvZmlsZUJpb1N0ZyxcclxuICBhdmF0YXJQaWNTdGcsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRzICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbi8qLS0gQWRkIE1vZGFsIC0tKi9cclxuY29uc3QgYWRkTW9kYWxGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbW9kYWwtZm9ybVwiKTtcclxuY29uc3QgYWRkTW9kYWxTdWJtaXRCdXR0b24gPSBhZGRNb2RhbEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG5cclxuLyotLSBFZGl0IE1vZGFsIC0tKi9cclxuY29uc3QgZWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xyXG5jb25zdCBlZGl0TW9kYWxGb3JtID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1tb2RhbC1mb3JtXCIpO1xyXG5jb25zdCBlZGl0TW9kYWxTdWJtaXRCdXR0b24gPSBlZGl0TW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuXHJcbi8qLS0gUHJvZmlsZSBTZWxlY3RvcnMgLS0qL1xyXG5jb25zdCBwcm9maWxlQXZhdGFyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1tb2RhbC1mb3JtXCIpO1xyXG5jb25zdCBwcm9maWxlUGVuSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwcm9maWxlX19hdmF0YXItcGVuLWljb25gKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1lZGl0XCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tYWRkXCIpO1xyXG5jb25zdCBhdmF0YXJNb2RhbFN1Ym1pdEJ1dHRvbiA9XHJcbiAgcHJvZmlsZUF2YXRhckZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG5jb25zdCBhdmF0YXJQaWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2F2YXRhci1waWNcIik7XHJcblxyXG4vKi0tIFRyYXNoIEljb24gU2VsZWN0b3JzIC0tKi9cclxuY29uc3QgdHJhc2hNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdHJhc2gtbW9kYWxcIik7XHJcbmNvbnN0IHRyYXNoTW9kYWxTdWJtaXRCdXR0b24gPSB0cmFzaE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLyogICAgICAgICAgICAgICAgIEV2ZW50IEhhbmRsZXJzICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KGZvcm1WYWx1ZXMpIHtcclxuICBhdmF0YXJQb3B1cC5zZXRCdXR0b25UZXh0KHRydWUsIGF2YXRhck1vZGFsU3VibWl0QnV0dG9uKTtcclxuICBhcGlcclxuICAgIC5wYXRjaFByb2ZpbGVBdmF0YXIoZm9ybVZhbHVlcy51cmwpXHJcbiAgICAudGhlbigob2JqZWN0KSA9PiB7XHJcbiAgICAgIHByb2ZpbGVBdmF0YXJGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcclxuICAgICAgdXNlckluZm8uc2V0QXZhdGFyUGljKG9iamVjdC5hdmF0YXIpO1xyXG4gICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xyXG4gICAgICBwcm9maWxlQXZhdGFyRm9ybS5yZXNldCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGF2YXRhclBvcHVwLnNldEJ1dHRvblRleHQoZmFsc2UsIGF2YXRhck1vZGFsU3VibWl0QnV0dG9uLCBcIlNhdmVcIik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZm9ybVZhbHVlcykge1xyXG4gIGNvbnN0IGN1cnJlbnRVc2VySW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVBvcHVwLnNldEJ1dHRvblRleHQodHJ1ZSwgZWRpdE1vZGFsU3VibWl0QnV0dG9uKTtcclxuICBhcGlcclxuICAgIC5wYXRjaFByb2ZpbGUoZm9ybVZhbHVlcy5uYW1lLCBmb3JtVmFsdWVzLmJpbylcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oXHJcbiAgICAgICAgZm9ybVZhbHVlcy5uYW1lLFxyXG4gICAgICAgIGZvcm1WYWx1ZXMuYmlvLFxyXG4gICAgICAgIGN1cnJlbnRVc2VySW5mby5hdmF0YXJcclxuICAgICAgKTtcclxuICAgICAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcHJvZmlsZVBvcHVwLnNldEJ1dHRvblRleHQoZmFsc2UsIGVkaXRNb2RhbFN1Ym1pdEJ1dHRvbiwgXCJTYXZlXCIpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGZvcm1WYWx1ZXMpIHtcclxuICBjb25zdCBuYW1lID0gZm9ybVZhbHVlcy50aXRsZTtcclxuICBjb25zdCBsaW5rID0gZm9ybVZhbHVlcy51cmw7XHJcbiAgY2FyZFBvcHVwLnNldEJ1dHRvblRleHQodHJ1ZSwgYWRkTW9kYWxTdWJtaXRCdXR0b24pO1xyXG4gIGFwaVxyXG4gICAgLnBvc3RDYXJkcyh7IG5hbWUsIGxpbmsgfSlcclxuICAgIC50aGVuKChvYmplY3QpID0+IHtcclxuICAgICAgYWRkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVDYXJkKG9iamVjdCk7XHJcbiAgICAgIHNlY3Rpb24uYWRkSXRlbShlbGVtZW50KTtcclxuICAgICAgY2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIGFkZE1vZGFsRm9ybS5yZXNldCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGNhcmRQb3B1cC5zZXRCdXR0b25UZXh0KGZhbHNlLCBhZGRNb2RhbFN1Ym1pdEJ1dHRvbiwgXCJDcmVhdGVcIik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhkYXRhKSB7XHJcbiAgcG9wdXBJbWcub3BlbihkYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ29uZmlybU1vZGFsKGRhdGEpIHtcclxuICB0cmFzaENvbmZpcm1Qb3B1cC5vcGVuKCk7XHJcbiAgdHJhc2hDb25maXJtUG9wdXAuc2V0U3VibWl0RnVuY3Rpb24oKCkgPT4ge1xyXG4gICAgY2FyZFBvcHVwLnNldEJ1dHRvblRleHQodHJ1ZSwgdHJhc2hNb2RhbFN1Ym1pdEJ1dHRvbik7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoZGF0YS5hcGlEYXRhLl9pZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHRyYXNoQ29uZmlybVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgZGF0YS5yZW1vdmVDYXJkKGRhdGEuY2FyZEVsZW1lbnQpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGNhcmRQb3B1cC5zZXRCdXR0b25UZXh0KGZhbHNlLCB0cmFzaE1vZGFsU3VibWl0QnV0dG9uLCBcIlllc1wiKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2VJY29uQ2xpY2soZGF0YSkge1xyXG4gIGlmIChkYXRhLmFwaURhdGEuaXNMaWtlZCkge1xyXG4gICAgYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkTGlrZShkYXRhLmFwaURhdGEuX2lkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgZGF0YS5jaGFuZ2VIZWFydEljb24oZGF0YSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgYXBpXHJcbiAgICAgIC5wdXRDYXJkTGlrZShkYXRhLmFwaURhdGEuX2lkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgZGF0YS5jaGFuZ2VIZWFydEljb24oZGF0YSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLyogICAgICAgICAgICAgICAgIEV2ZW50IExpc3RlbmVycyAgICAgICAgICAgICAgICAgICAqL1xyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5wcm9maWxlUGVuSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhclBvcHVwLm9wZW4oKTtcclxuICBwcm9maWxlQXZhdGFyRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBjdXJyZW50VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVQb3B1cC5zZXRJbnB1dFZhbHVlcyhjdXJyZW50VXNlckluZm8pO1xyXG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbiAgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcclxufSk7XHJcblxyXG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2FyZFBvcHVwLm9wZW4oKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcclxufSk7XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgbmFtZTogY2FyZERhdGEubmFtZSxcclxuICAgICAgYWx0TmFtZTogY2FyZERhdGEubmFtZSxcclxuICAgICAgbGluazogY2FyZERhdGEubGluayxcclxuICAgICAgX2lkOiBjYXJkRGF0YS5faWQsXHJcbiAgICB9LFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZUNvbmZpcm1Nb2RhbCxcclxuICAgIGhhbmRsZUxpa2VJY29uQ2xpY2tcclxuICApO1xyXG5cclxuICBjb25zdCB0ZW1wQ2FyZCA9IGNhcmQuZ2V0VmlldygpO1xyXG4gIGNhcmQuc2V0SGVhcnRJY29uKGNhcmREYXRhKTtcclxuXHJcbiAgcmV0dXJuIHRlbXBDYXJkO1xyXG59XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8qICAgICAgICAgICAgICBVc2VySW5mbyBDb25zdHJ1Y3RvciAgICAgICAgICAgICAgICAgKi9cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8ocHJvZmlsZU5hbWVTdGcsIHByb2ZpbGVCaW9TdGcsIGF2YXRhclBpY1N0Zyk7XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8qICAgICAgICAgICBGb3JtVmFsaWRhdG9yIENvbnN0cnVjdG9yICAgICAgICAgICAgICAgKi9cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuY29uc3QgcHJvZmlsZUF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIHByb2ZpbGVBdmF0YXJGb3JtXHJcbik7XHJcbnByb2ZpbGVBdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgZWRpdE1vZGFsRm9ybVxyXG4pO1xyXG5lZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGFkZE1vZGFsRm9ybSk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vKiAgICAgICAgICAgUG9wdXBXaXRoRm9ybSBDb25zdHJ1Y3RvciAgICAgICAgICAgICAgICovXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbmNvbnN0IGF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgYXZhdGFyTW9kYWxDbGFzc1N0ZyxcclxuICBoYW5kbGVBdmF0YXJGb3JtU3VibWl0XHJcbik7XHJcbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBlZGl0TW9kYWxDbGFzc1N0ZyxcclxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxyXG4pO1xyXG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGNhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKGFkZE1vZGFsQ2xhc3NTdGcsIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KTtcclxuY2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8qICAgICAgICAgIFBvcHVwV2l0aEltYWdlIENvbnN0cnVjdG9yICAgICAgICAgICAgICAgKi9cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuY29uc3QgcG9wdXBJbWcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocHJldmlld01vZGFsQ2xhc3NTdGcpO1xyXG5wb3B1cEltZy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vKiAgICAgICAgIFBvcHVwV2l0aENvZmlybSBDb25zdHJ1Y3RvciAgICAgICAgICAgICAgICovXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbmNvbnN0IHRyYXNoQ29uZmlybVBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm0oXHJcbiAgdHJhc2hNb2RhbENsYXNzU3RnLFxyXG4gIGhhbmRsZUNvbmZpcm1Nb2RhbFxyXG4pO1xyXG50cmFzaENvbmZpcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICBBcGkgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBhdXRob3JpemF0aW9uQ29kZSxcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuYXBpXHJcbiAgLmdldFByb2ZpbGUoKVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQsIGRhdGEuYXZhdGFyKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfSk7XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8qICAgICAgICAgICAgICAgU2VjdGlvbiBDb25zdHJ1Y3RvciAgICAgICAgICAgICAgICAgKi9cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHsgaXRlbXM6IG51bGwsIHJlbmRlcmVyOiBjcmVhdGVDYXJkIH0sXHJcbiAgXCIuY2FyZF9fbGlzdFwiXHJcbik7XHJcblxyXG5hcGlcclxuICAuZ2V0Q2FyZHMoKVxyXG4gIC50aGVuKChjYXJkcykgPT4ge1xyXG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBiaW9TZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWVTZWxlY3RvciA9IG5hbWVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2Jpb1NlbGVjdG9yID0gYmlvU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9hdmF0YXJTZWxlY3RvciA9IGF2YXRhclNlbGVjdG9yO1xyXG5cclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9uYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYmlvRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fYmlvU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fYXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgc2V0QXZhdGFyUGljKGxpbmspIHtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gbGluaztcclxuICB9XHJcblxyXG4gIC8vIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlXHJcbiAgLy8gdXNlci4gVGhpcyBtZXRob2Qgd2lsbCBiZSBoYW5keSBmb3IgY2FzZXMgd2hlbiBpdCdzXHJcbiAgLy8gbmVjZXNzYXJ5IHRvIGRpc3BsYXkgdGhlIHVzZXIgZGF0YSBpbiB0aGUgb3BlbiBmb3JtXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGJpbzogdGhpcy5fYmlvRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHVzZXJJbmZvO1xyXG4gIH1cclxuXHJcbiAgLy8gc2V0VXNlckluZm8oKSB0YWtlcyBuZXcgdXNlciBkYXRhIGFuZCBhZGRzIGl0XHJcbiAgLy8gdG8gdGhlIHBhZ2UuIFRoaXMgbWV0aG9kIHNob3VsZCBiZSB1c2VkIGFmdGVyIHN1Y2Nlc3NmdWxcclxuICAvLyBzdWJtaXNzaW9uIG9mIHRoZSBwcm9maWxlIGZvcm1cclxuICBzZXRVc2VySW5mbyhuZXdOYW1lLCBuZXdCaW8sIG5ld0F2YXRhcikge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuZXdOYW1lO1xyXG4gICAgdGhpcy5fYmlvRWxlbWVudC50ZXh0Q29udGVudCA9IG5ld0JpbztcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gbmV3QXZhdGFyO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cFByZXZpZXdJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7cG9wdXBTZWxlY3Rvcn0taW1hZ2VgKTtcclxuICAgIHRoaXMuX3BvcHVwUHJldmlld0NhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgJHtwb3B1cFNlbGVjdG9yfS10aXRsZWBcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHRoaXMuX3BvcHVwUHJldmlld0ltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX3BvcHVwUHJldmlld0ltYWdlLmFsdCA9IGRhdGEuYWx0TmFtZTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cFByZXZpZXdDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG5cclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRGVsZXRlKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRGdW5jdGlvbihzdWJtaXRGdW5jdGlvbikge1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlID0gc3VibWl0RnVuY3Rpb247XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICAvLyBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCJcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfSArICR7cmVzLm1lc3NhZ2V9YCk7XHJcbiAgfVxyXG5cclxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgLyogICAgICAgICBQcm9maWxlIFBpY3R1cmUgQXBpIGZ1bmN0aW9ucyAgICAgICAgICAgICAqL1xyXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgLy8g4oCTIFVwZGF0ZSBhdmF0YXJcclxuICAvLyBQQVRDSCBodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS91c2Vycy9tZS9hdmF0YXJcclxuICBwYXRjaFByb2ZpbGVBdmF0YXIobGluaykge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QodGhpcy5fYmFzZVVybCArIFwiL3VzZXJzL21lL2F2YXRhclwiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gIC8qICAgICAgICAgICAgIFByb2ZpbGUgQXBpIGZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgKi9cclxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gIC8vIOKAkyBHZXQgdGhlIGN1cnJlbnQgdXNlcuKAmXMgaW5mb1xyXG4gIC8vIEdFVCBodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS91c2Vycy9tZVxyXG4gIGdldFByb2ZpbGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDigJMgVXBkYXRlIHlvdXIgcHJvZmlsZSBpbmZvcm1hdGlvblxyXG4gIC8vIFBBVENIIGh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL3VzZXJzL21lXHJcbiAgcGF0Y2hQcm9maWxlKG5hbWVWYXIsIGJpb1Zhcikge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QodGhpcy5fYmFzZVVybCArIFwiL3VzZXJzL21lXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lVmFyLFxyXG4gICAgICAgIGFib3V0OiBiaW9WYXIsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgLyogICAgICAgICAgICAgQ2FyZCBBcGkgZnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAqL1xyXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgLy8g4oCTIEdldCBhbGwgY2FyZHNcclxuICAvLyBHRVQgaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcclxuICBnZXRDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHNcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDigJMgQ3JlYXRlIGEgY2FyZFxyXG4gIC8vIFBPU1QgaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcclxuICBwb3N0Q2FyZHMoY2FyZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi9jYXJkc1wiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBjYXJkLm5hbWUsXHJcbiAgICAgICAgbGluazogY2FyZC5saW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIOKAkyBMaWtlIGEgY2FyZFxyXG4gIC8vIFBVVCBodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9jYXJkcy9jYXJkSWQvbGlrZXNcclxuICBwdXRDYXJkTGlrZShJRCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBgL2NhcmRzLyR7SUR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8g4oCTIERpc2xpa2UgYSBjYXJkXHJcbiAgLy8gREVMRVRFIGh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL2NhcmRzL2NhcmRJZC9saWtlc1xyXG4gIGRlbGV0ZUNhcmRMaWtlKElEKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIGAvY2FyZHMvJHtJRH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyDigJMgRGVsZXRlIGEgY2FyZFxyXG4gIC8vIERFTEVURSBodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9jYXJkcy9jYXJkSWRcclxuICBkZWxldGVDYXJkKGNhcmRJRCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBgL2NhcmRzLyR7Y2FyZElEfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCIvLyBTaG91bGQgYWRkIGVsZW1lbnRzIHRvIHRoZSBET01cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgLy8gVGhlIGl0ZW1zIHByb3BlcnR5IHNob3VsZCBiZSBhbiBhcnJheSBvZiBkYXRhLCB3aGljaCB5b3UgbXVzdFxyXG4gIC8vIGFkZCB0byB0aGUgcGFnZSB3aGVuIGl0IGxvYWRzLlxyXG5cclxuICAvLyBUaGUgcmVuZGVyZXIgcHJvcGVydHkgc2hvdWxkIGJlIGEgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGFuZFxyXG4gIC8vIGFkZHMgYSBzaW5nbGUgaXRlbSB0byB0aGUgcGFnZS5cclxuXHJcbiAgLy8gVGhlIHRoaXJkIGl0ZW0gaXMgYSBDU1MgY2xhc3Mgc2VsZWN0b3Igd2hlcmUgeW91J2xsIGFkZCB0aGUgY2FyZCBlbGVtZW50c1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNsYXNzU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY2xhc3NTZWxlY3RvciA9IGNsYXNzU2VsZWN0b3I7XHJcblxyXG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NsYXNzU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy8gcmVuZGVycyBhbGwgZWxlbWVudHMgb24gdGhlIHBhZ2VcclxuICByZW5kZXJJdGVtcyhjYXJkcykge1xyXG4gICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdDYXJkID0gdGhpcy5fcmVuZGVyZXIoY2FyZCk7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChuZXdDYXJkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gdGFrZXMgYSBET00gZWxlbWVudCBhbmQgYWRkcyBpdCB0byB0aGUgY29udGFpbmVyLiBUaGlzIG1ldGhvZFxyXG4gIC8vIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhZGRpbmcgYW4gaW5kaXZpZHVhbCBjYXJkIHRvIHRoZSBET01cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZUNvbmZpcm1Nb2RhbCIsImhhbmRsZUxpa2VJY29uQ2xpY2siLCJuYW1lIiwiYWx0TmFtZSIsImxpbmsiLCJfaWQiLCJ0aGlzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUNvbmZpcm1Nb2RhbCIsIl9oYW5kbGVMaWtlSWNvbkNsaWNrIiwiX3NldENhcmREYXRhIiwiX2NhcmRJbWFnZSIsInNyYyIsImFsdCIsIl9jYXJkVGl0bGUiLCJ0ZXh0Q29udGVudCIsImNhcmRFbGVtZW50IiwiX3NldEV2ZW50TGlzdGVuZXIiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdHJhc2hCdXR0b24iLCJjaGFuZ2VIZWFydEljb24iLCJkYXRhIiwiYXBpRGF0YSIsImlzTGlrZWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJzZXRIZWFydEljb24iLCJyZW1vdmVDYXJkIiwiY2FyZCIsImdldFZpZXciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybVRvVmFsaWRhdGUiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl92YWxpZGF0ZWRGb3JtIiwiX2VuYWJsZUJ1dHRvbiIsIl9idXR0b24iLCJkaXNhYmxlZCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJfZXJyb3JDbGFzc0VsIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9yZXR1cm5zVmFsaWRpdHkiLCJfaW5wdXRzIiwiZXZlcnkiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlQnV0dG9uIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZVBvcHVwQnV0dG9uIiwiX2hhbmRsZU92ZXJsYXlDbGljayIsIl9oYW5kbGVPdmVybGF5IiwiX2hhbmRsZURvY3VtZW50S2V5ZG93biIsIl9oYW5kbGVFc2NDbG9zZSIsImtleSIsImNsb3NlIiwiZXZ0IiwidGFyZ2V0Iiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJ2YWx1ZSIsInNldEJ1dHRvblRleHQiLCJpc0xvYWRpbmciLCJidXR0b24iLCJidG5UZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwic2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwidmFsaWRhdGlvbkNvbmZpZyIsImFkZE1vZGFsRm9ybSIsImFkZE1vZGFsU3VibWl0QnV0dG9uIiwiZWRpdE1vZGFsRm9ybSIsImVkaXRNb2RhbFN1Ym1pdEJ1dHRvbiIsInByb2ZpbGVBdmF0YXJGb3JtIiwicHJvZmlsZVBlbkljb24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJhdmF0YXJNb2RhbFN1Ym1pdEJ1dHRvbiIsInRyYXNoTW9kYWxTdWJtaXRCdXR0b24iLCJwb3B1cEltZyIsInRyYXNoQ29uZmlybVBvcHVwIiwic2V0U3VibWl0RnVuY3Rpb24iLCJjYXJkUG9wdXAiLCJhcGkiLCJkZWxldGVDYXJkIiwidGhlbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZmluYWxseSIsImRlbGV0ZUNhcmRMaWtlIiwicHV0Q2FyZExpa2UiLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJ0ZW1wQ2FyZCIsImF2YXRhclBvcHVwIiwicHJvZmlsZUF2YXRhckZvcm1WYWxpZGF0b3IiLCJjdXJyZW50VXNlckluZm8iLCJ1c2VySW5mbyIsImdldFVzZXJJbmZvIiwicHJvZmlsZVBvcHVwIiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsIm5hbWVTZWxlY3RvciIsImJpb1NlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZVNlbGVjdG9yIiwiX2Jpb1NlbGVjdG9yIiwiX2F2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Jpb0VsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsInNldEF2YXRhclBpYyIsImJpbyIsImF2YXRhciIsInNldFVzZXJJbmZvIiwibmV3TmFtZSIsIm5ld0JpbyIsIm5ld0F2YXRhciIsInBhdGNoUHJvZmlsZUF2YXRhciIsInVybCIsIm9iamVjdCIsInJlc2V0IiwicGF0Y2hQcm9maWxlIiwidGl0bGUiLCJwb3N0Q2FyZHMiLCJlbGVtZW50Iiwic2VjdGlvbiIsImFkZEl0ZW0iLCJfcG9wdXBQcmV2aWV3SW1hZ2UiLCJfcG9wdXBQcmV2aWV3Q2FwdGlvbiIsImhhbmRsZURlbGV0ZSIsIl9oYW5kbGVEZWxldGUiLCJzdWJtaXRGdW5jdGlvbiIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsIm1lc3NhZ2UiLCJfcmVxdWVzdCIsIm9wdGlvbnMiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0UHJvZmlsZSIsIm5hbWVWYXIiLCJiaW9WYXIiLCJhYm91dCIsImdldENhcmRzIiwicmVzdWx0IiwiSUQiLCJjYXJkSUQiLCJsb2ciLCJhdXRob3JpemF0aW9uIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY2xhc3NTZWxlY3RvciIsImNvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiY2FyZHMiLCJuZXdDYXJkIiwiYXBwZW5kIiwicHJlcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=